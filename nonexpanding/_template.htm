<!DOCTYPE html>
<html>
<head>
<style>

    body {
        text-align: center;
        color:white;
        background-color: #080808;
        overflow: hidden;
        font-size: 20pt;
    }

    table {
        margin:auto;
    }

    .slide {
        padding:0.9em;
        display:none;
    }

    .sidebyside {
        display: inline-block;
        padding:70px;
    }

</style>
</head>

<body>

    <img style="display: none;" id="supernova" src="../../img/supernova.png">
    <img style="display: none;" id="spectrum" src="visiblespectrum.png">


<div class="slide">

    <div class="sidebyside">
        <h2 class="red">Redshift</h2>
        <canvas width="700" height="700" id="expandingspace"></canvas>
        <h2>Expansion</h2>
    </div>

    <div class="sidebyside" style="width:700px;">
        <div class="fi">
            <h2>Also <span  class="red" >Redshift</span></h2>
            <canvas width="700" height="700" id="expandingtime"></canvas>
            <h2>Time Dilation</h2>
        </div>
        
    </div>


</div>


<div class="slide">
    <h1 style="font-size:96pt;">Nonexpanding</h1>
    <h2 style="color:#AAA;"><i>Evidence for and against the expanding universe</i></h2>
    <br><br><br><br>
<hr style="width:50%;">
<br><br><br>
    <h1 class="fi"><span style="color:#AAA;">Ep. 1:</span> The <i>REAL</i> reason for cosmic <span class="red">redshift</span></h1>

</div>





<script type="text/javascript" src="https://www.hostmath.com/Math/MathJax.js?config=OK"></script>


<script>

    var slides = document.getElementsByClassName("slide")
    var slide = -1
    var fi = 0
    var fis = document.getElementsByClassName("fi")
    for (let i = 0; i < fis.length; i++) {
        fis[i].style.opacity = 0
    }
    fis = []

    document.onkeypress = e => {

        if (!isNaN( parseInt(e.key))) {
            slide = e.key * 1 - 1
            console.log(slide)
        }

        advance()
    }

    function advance() {

        if (slide > -1 && fi < fis.length) {
            if (typeof fis[fi] === "function") {
                fis[fi]()
            }
            else {
                fadeIn(fis[fi])
            }
            fi++
        }
        else {

            if (slides[slide]) {
                fadeOut(slides[slide], nextSlide)
            }
            else {
                nextSlide()
            }

        }
    }

    //nextSlide()

    function nextSlide() {
        slide++
        fi = 0
        
        fis = []
        var els = slides[slide].getElementsByClassName("fi")
        for (let i = 0; i < els.length; i++) {
             fis.push(els[i])
        }

        onNewSlide(slide, fis)
        

        slides[slide].style.opacity = 0
        slides[slide].style.display = "block"
        fadeIn(slides[slide])
    }

    const fiLen = 100
    function fadeIn(el) {
        var start = Date.now()
        
        var h = setInterval(() => {
            el.style.opacity = Math.min(1, (Date.now() - start) / fiLen)
            if (el.style.opacity == 1) {
                clearInterval(h)
                console.log("dade done")
            }
        }, 1000/100)
    }

    const f0Len = 50
    function fadeOut(el, callback) {
        var start = Date.now()
        
        var h = setInterval(() => {
            el.style.opacity = Math.max(0, 1 - (Date.now() - start) / fiLen)
            if (el.style.opacity == 0) {
                clearInterval(h)
                el.style.display = "none"

                if (callback) callback()
            }
        }, 1000/100)
    }

    function onNewSlide(slide, fi) {
        if (slide === 0) {
            //fis.splice(0, 0, ()=>animateRedshifts())
        }
        
    }
</script>
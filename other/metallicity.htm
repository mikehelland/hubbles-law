<!DOCTYPE html>
<html>
    <head>
        <title>Metallicity</title>
        <style>
            body {
                font-family: Arial, Helvetica, sans-serif;
            }
            #graphs {
                height:400px;
                width: 700px;
                position:relative;
            }
            #graphs canvas {
                position:absolute;
                top: 0;
                left: 0;
                height:400px;
                width: 700px;
            }

            hr {
                opacity: 0.1;
                margin:18px;
            }

            input {
                width: 36px;
                border: 0;
                font-size: 12pt;
            }

            input[type=number] {
                appearance:textfield; /* Firefox */
            }


            .caption {
                /*padding:4px 20px;*/
                text-align: right;
            }



            #sse-hypothesis, #sse-lcdm {
                text-align: right;
                font-weight: bold;
            }

            .MathJax {
                font-size: 5pt !important;
            }

            #legend {
                position: absolute;
                left: 350px;
                top:335px;
            }
            #y-axis {
                position: absolute;
                top: -15px;
                left: 25px;
            }

            td {
                padding-right:20px;

            }
            th {
                padding-right:20px;
                text-align: left;
            }
        </style>
    </head>
<body>

<h3>Metallicity</h3>

<canvas id="background" height="300" width="1000"></canvas>

<div>


    <table style="margin-left: 20px; border: 1px solid #888888; padding:4px;">
        <tr>
            <th>Name</th>
            <th>z (redshift)</th>
            <th>12 + log(O/H)</th>
        </tr>

        <tr>
            <td>Solar<sup>[1]</sup></td>
            <td>0</td>
            <td>8.69</td>
        </tr>

        <tr>
            <td>Milky Way<sup>[1]</sup></td>
            <td>0</td>
            <td>8.5</td>
        </tr>
        
        <tr>
            <td>Large Magellanic Cloud (LMC)<sup>[1]</sup></td>
            <td>0</td>
            <td>8.37</td>
        </tr>

        <tr>
            <td>Small Magellanic Cloud (SMC)<sup>[1]</sup></td>
            <td>0</td>
            <td>8.01</td>
        </tr>

        <tr>
            <td>Pox 186<sup>[2]</sup></td>
            <td>0.004</td>
            <td>7.87 ± 0.04</td>
        </tr>

        <tr>
            <td>GS-z12<sup>[3]</sup></td>
            <td>12.5</td>
            <td>7.9</td>
        </tr>

        <tr>
            <td>SPT0418<sup>[4]</sup></td>
            <td>4.225</td>
            <td>8.58</td>
        </tr>

    </table>

    
    <ol>
        <li>
            <b>About Metallicity Variations in the Local Galactic Interstellar Medium</b>
            <a href="https://iopscience.iop.org/article/10.3847/1538-4357/ac6b38">https://iopscience.iop.org/article/10.3847/1538-4357/ac6b38</a>
        </li>

        <li>
            <b>A study of extreme CIII]1908 & [OIII]88/[CII]157 emission in Pox 186</b>
            <a href="https://arxiv.org/abs/2307.00059">https://arxiv.org/abs/2307.00059</a>
        </li>

        <li>
            <b>JADES: Carbon enrichment 350 Myr after the Big Bang in a gas-rich galaxy</b>
            <a href="https://arxiv.org/abs/2311.09908">https://arxiv.org/abs/2311.09908</a>
        </li>
        <li>
            <b>Discovery of a Dusty, Chemically Mature Companion to a z ∼ 4 Starburst Galaxy in JWST ERS Data</b>
            <a href="https://iopscience.iop.org/article/10.3847/2041-8213/acb59c">https://iopscience.iop.org/article/10.3847/2041-8213/acb59c</a>
        </li>
    </ol>


    <!--
        [1] <a href="https://arxiv.org/abs/2306.16039">https://arxiv.org/abs/2306.16039</a>
    <b>Hidden giants in JWST's PEARLS: An ultra-massive z=4.26 sub-millimeter galaxy that is invisible to HST</b>
    [3] <a href="https://arxiv.org/abs/1812.05098">https://arxiv.org/abs/1812.05098</a>
    <b>Exploring the origins of a new, apparently metal-free gas cloud at
        z = 4.4</b>
    -->
    

</div>
<script src="flrw.js"></script>

<script>
    const black = false
    var graph = document.getElementById("background")
    var ctxB = graph.getContext("2d")

    var offset = 20
    var height = graph.height - offset
    var zoom = 1
    var zoomGY = height * 0.4
    var zoomG = zoom * 6.9

    var Omega_M = 0.3 
    var Omega_L = 0.7
    var Omega_k = 0
    var H0 = 68

    var json
    var points = []
    fetch("https://mikehelland.github.io/hubbles-law/data/metallicity.json").then(res => res.json()).then(res => {
        json = res
        points = res.data

        drawGraph()
    })
    /*
    points.push({name: "Milky Way",   z: 0,       OH: 8.50,       Z: 1, x:0})
    points.push({name: "solar",       z: 0,       OH: 8.69,       Z: 1, x:0})
    points.push({name: "SMC",         z: 0,       OH: 8.01,       Z: 0.25, x:0})
    points.push({name: "LMC",         z: 0,       OH: 8.37,       Z: 0.33, x:0})
    points.push({name: "GS z12",      z: 12.479,  OH: 7.9,          Z: 1.01})
    points.push({name: "Pox 186",     z: 0.004,   OH: 7.87,          Z: 1.01})
    points.push({name: "SPT0418",     z: 4.225,   OH: 8.58,          Z: 1.01})
    */
    points.forEach(point => {
        if (point.z === 0) return 
        point.x = FLRW(H0, Omega_L, Omega_M, point.z).lookback
    })

    var zs = [];
    [0.5, 1, 2, 3, 4, 5, 10, 20].forEach(z => {
        zs.push({z, t: FLRW(H0, Omega_L, Omega_M, z).lookback})
    })

    var z226 = FLRW(H0, Omega_L, Omega_M, 2.26).lookback
    var z426 = FLRW(H0, Omega_L, Omega_M, 4.26).lookback

    var z128 = FLRW(H0, Omega_L, Omega_M, 12.8).lookback


    //zs.push({z: "BB", t: 13.81781132270681})
    var bb = 13.8178

    var data = [
        /*{color: "blue", tm: 
        [
            {t: 0, m: 1},
            {t: 7, m: 0.75},
            {t: zs[5].t, m: 0}
        ]},
        {color: "green", tm: 
        [
            {t: 0, m: 1},
            {t: 7, m: 0.9},
            {t: zs[5].t, m: 0.3},
            {t: zs[6].t, m: 0.0}
        ]},
        {color: "purple", tm: 
        [
            {t: 0, m: 1},
            {t: zs[1].t, m: 0.95},
            {t: zs[2].t, m: 0.8},
            {t: zs[6].t - 0.2, m: 0.8},
            {t: zs[6].t + 0.1, m: 0.0}
        ]},
        */
        {color: "green", tm: 
        [
            {t: 0, m: 1},
            {t: FLRW(H0, Omega_L, Omega_M, 3.3).DT, m: 0.2},
            {t: FLRW(H0, Omega_L, Omega_M, 8).DT, m: 0.1}
        ]
        }
    ]


    function drawGraph() {
        sseHypothesis = 0
        
        ctxB.lineWidth = 2
        ctxB.fillStyle = black ? "black" : "white"
        ctxB.fillRect(0, 0, graph.width, graph.height)

        ctxB.strokeStyle = !black ? "black" : "white"
        ctxB.strokeRect(offset, offset, graph.width, graph.height - 2*offset)

        ctxB.font = "14px sans-serif"

        ctxB.fillRect(offset + 16, offset + 33, 2, 2)
        ctxB.fillStyle = "black"

        ctxB.fillStyle = !black ? "black" : "white"
        ctxB.textAlign = "left"
        //ctxB.fillText("SSE to Pantheon+SH0ES", offset + 5, offset)

        ctxB.textAlign = "left"
        ctxB.fillText("12 + log(O/H)", 4 + offset, 34)

        ctxB.textAlign = "left"
        ctxB.fillText('ΛCDM', offset, 12)

        ctxB.textAlign = "center"
        ctxB.fillText("Lookback Time (billion years)", graph.width / 2 + offset, graph.height - 30)
        ctxB.fillText("Redshift z", graph.width / 2 + offset, 34)
        
        ctxB.fillStyle = "red"
        ctxB.globalAlpha = 0.2
        ctxB.fillRect(offset + bb * 10 * zoomG, offset, 100, graph.height - 2*offset)
        ctxB.globalAlpha = 1
        
        var dgi
        ctxB.font = "10px sans-serif"
        ctxB.fillStyle = "black"
        
        for (dgi = 0; dgi <= 140; dgi+=10) {
            ctxB.fillText(dgi/10, offset + dgi  * zoomG, graph.height - 5)    
        }        

        ctxB.lineWidth = 1
        ctxB.strokeStyle = "#888888"
        zs.forEach(z => {
            ctxB.fillText(z.z, offset + z.t * 10 * zoomG, 10)    
            ctxB.beginPath()
            ctxB.moveTo(offset + z.t * 10 * zoomG, offset)
            ctxB.lineTo(offset + z.t * 10 * zoomG, height)
            ctxB.stroke()
        })

        data.forEach(line => {
            console.log(line)
            ctxB.strokeStyle = line.color
            ctxB.beginPath()
            ctxB.moveTo(offset + line.tm[0].t, -offset + graph.height - line.tm[0].m * zoomGY)
            for (dgi = 1; dgi < line.tm.length; dgi++) {
                ctxB.lineTo(offset + line.tm[dgi].t * 10 * zoomG, -offset + graph.height - line.tm[dgi].m * zoomGY)
            }
            ctxB.stroke()
        })

        ctxB.translate(offset, graph.height - offset)

        for (dgi = 0; dgi <= 2; dgi+=0.5) {
            ctxB.fillText(7 + dgi, -12, - dgi * zoomGY)    
        }


        ctxB.globalAlpha = 0.2
        ctxB.beginPath()
        ctxB.moveTo(offset, (graph.height - offset)/2)
        ctxB.lineTo(graph.width, (graph.height - offset)/2)
        ctxB.setLineDash([20, 10])
        ctxB.stroke()
        ctxB.globalAlpha = 1
        ctxB.setLineDash([])

        ctxB.font = "14px sans-serif"

        for (var i = 0; i < points.length; i++) {
            
            ctxB.fillRect(
                - 5 + points[i].x * 10 * zoomG, 
                - zoomGY * (points[i].OH - 7) - 10, 
                10, 10)

            ctxB.textAlign = points[i].z > 1 ? "right" : "left"
        
            ctxB.fillText(points[i].name, 
                points[i].x * 10 * zoomG + (points[i].z > 1 ? -10 : 10), 
                - zoomGY * (points[i].OH - 7))

        }

    }

    drawGraph()



</script>

<script type="text/javascript" src="https://www.hostmath.com/Math/MathJax.js?config=OK"></script>
